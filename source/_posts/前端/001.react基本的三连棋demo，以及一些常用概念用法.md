---
title: react基本的三连棋demo，以及一些常用概念用法
date: 2020-04-02 17:11:27
updated: 2020-04-02 17:11:32
tags: 学习笔记、实战内容、读书笔记
---

## 知识点清单

* 环境搭建相关：node、npm、npx、create-react-app

## 创建react脚手架，了解脚手架基本功能

```js
npx create-react-app my-app
cd my-app
npm start
```

## npm 和 npx 的区别

npm 从5.2版开始，增加了 npx 命令。它有很多用处，本文介绍该命令的主要使用场景。

* 调用项目安装的模块（调用安装模块中的代码，不用指定node_module)
* 避免全局安装模块（可以不用全局安装模块而实现模块的调用）
* --no-install 参数和--ignore-existing 参数（对于全局安装的配置）
* 使用不同版本的 node（可以使用不同的版本号）
* -p 参数（）
* -c 参数（）
* 执行 GitHub 源码

总结:

npx就是npm的高级特性功能，在默认的5.2版本之后就自带了，有一些较为高级的用法，需要使用npx

参考链接：[npx 使用教程](http://www.ruanyifeng.com/blog/2019/02/npx.html)

## 一个游戏设计，介绍了react组件化开发的方式, 复盘

[连接](https://zh-hans.reactjs.org/tutorial/tutorial.html)

## 组件的两种方式

* 默认组件继承component实现render函数
* 使用函数，传递props直接通过返回值实现

## 为什么不可变性在 React 中非常重要

一般来说，有两种改变数据的方式。第一种方式是直接修改变量的值，第二种方式是使用新的一份数据替换旧数据。

相关函数：使用解构重构是一种好的方式

1. slice()
2. concat()
3. var newPlayer = {...player, score: 2};

直接修改数据

```js
var player = {score: 1, name: 'Jeff'};
player.score = 2;
// player 修改后的值为 {score: 2, name: 'Jeff'}
```

新数据替换旧数据

```js
var player = {score: 1, name: 'Jeff'};

var newPlayer = Object.assign({}, player, {score: 2});
// player 的值没有改变, 但是 newPlayer 的值是 {score: 2, name: 'Jeff'}

// 使用对象展开语法，就可以写成：
// var newPlayer = {...player, score: 2};
```

不直接修改（或改变底层数据）这种方式和前一种方式的结果是一样的，这种方式有以下几点好处：

* 简化复杂的功能
  
  不可变性使得复杂的特性更容易实现。在后面的章节里，我们会实现一种叫做“时间旅行”的功能。“时间旅行”可以使我们回顾井字棋的历史步骤，并且可以“跳回”之前的步骤。这个功能并不是只有游戏才会用到——撤销和恢复功能在开发中是一个很常见的需求。不直接在数据上修改可以让我们追溯并复用游戏的历史记录。

* 跟踪数据的改变
  
  如果直接修改数据，那么就很难跟踪到数据的改变。跟踪数据的改变需要可变对象可以与改变之前的版本进行对比，这样整个对象树都需要被遍历一次。
  跟踪不可变数据的变化相对来说就容易多了。如果发现对象变成了一个新对象，那么我们就可以说对象发生改变了。

* 确定在 React 中何时重新渲染

  不可变性最主要的优势在于它可以帮助我们在 React 中创建 pure components。我们可以很轻松的确定不可变数据是否发生了改变，从而确定何时对组件进行重新渲染。

## 状态抽取、逻辑抽取、层次结构抽取

* 子组件一般情况下是显示和反馈组件，不维护自己的state
* 一个功能，由最上层的组件来管理state，props传递给下层组件，实现交互。
  * 而后可以将state存储到redux中，最上层组件也不需要管理状态了，通过redux管理，使用dispatch更新
  * 使用dispatch专门来做state管理，使用model来做逻辑管理，界面组件就专门做界面相关的事情

最佳实践：
  尽量编写存函数，类似静态函数，只有输入值，然后返回值，保证相同的输入，不可能会出现不同的输出，没有外部依赖，比如state、props、等等

状态提升：
  将子组件维护的state提升到父组件来管理，通过判断数据就能够获取状态以及一些控制操作。相比操作界面简单，而且react是数据驱动，数据只要不相同就可以有不同的页面展示情况。

总结：
  
1. 编写组件的方式有继承component、或者使用函数式组件
2. 经常的使用状态提升，通过最上层组件来管理状态，下层进行展示和方法交互
3. 使用开发工具能够查看浏览器对应的组件状态
4. 不可变性在react中很重要，可以实现简化复杂功能、跟踪数据的改变、确定在react中何时重新渲染可以进行性能优化
5. 不可变优化的方式：使用拷贝，替换 代替直接修改原值，类似的方法slice, Object.assign() 编写纯函数保证依赖
6. 不变的逻辑编写成函数的方式，保证能够扩展移植
7. 选择一个key的重要性，计算机是程序，没办法识别对应的组件，我们在一个层级的组件中，设定一个唯一的key，程序就能够快速识别对应的组件的变化，进行渲染
